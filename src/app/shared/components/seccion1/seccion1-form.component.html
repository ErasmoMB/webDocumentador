<div *ngIf="modoFormulario" class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">Informaci√≥n del Proyecto</h4>
    
    <div class="form-field">
      <label class="label">{{ SECCION1_TEMPLATES.labelNombreProyecto }} <span class="required">*</span></label>
      <input 
        type="text" 
        class="input" 
        [placeholder]="SECCION1_TEMPLATES.placeholderNombreProyecto"
        [ngModel]="projectNameSignal() === '____' ? '' : projectNameSignal()"
        (ngModelChange)="onFieldChange('projectName', $event)">
    </div>
  </div>

  <div class="form-group-section">
    <h4 class="section-title">Cargar Datos de Centros Poblados</h4>
    
    <div class="form-field">
      <label class="label">{{ SECCION1_TEMPLATES.labelSubirUBIGEO }} <span class="required">*</span></label>
      <div class="file-upload-wrapper">
        <input 
          type="file" 
          id="jsonFileInput" 
          accept=".json" 
          (change)="onJSONFileSelected($event)"
          style="display: none;">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="selectJSONFile()">
          Seleccionar archivo
        </button>
        <span *ngIf="jsonFileNameSignal()" class="file-name">{{ jsonFileNameSignal() }}</span>
        <span *ngIf="!jsonFileNameSignal()" class="file-name">{{ SECCION1_TEMPLATES.mensajeArchivoNoSeleccionado }}</span>
      </div>
      <small class="form-hint">{{ SECCION1_TEMPLATES.hintSeleccionarJSON }}</small>
    </div>

    <div class="form-field" *ngIf="centrosPobladosJSONSignal().length > 0">
      <label class="label">{{ SECCION1_TEMPLATES.labelInformacionGeografica }}</label>
      <div class="form-row">
        <div class="form-field">
          <label class="label">{{ SECCION1_TEMPLATES.labelDepartamento }} <span class="required">*</span></label>
          <input 
            type="text" 
            class="input" 
            [value]="departamentoSeleccionadoSignal()"
            (input)="onFieldChange('departamentoSeleccionado', $any($event.target).value)"
            [placeholder]="SECCION1_TEMPLATES.placeholderDepartamento">
          <small class="form-hint">{{ SECCION1_TEMPLATES.hintGeoAutomatica }}</small>
        </div>
        <div class="form-field">
          <label class="label">{{ SECCION1_TEMPLATES.labelProvincia }} <span class="required">*</span></label>
          <input 
            type="text" 
            class="input" 
            [value]="provinciaSeleccionadaSignal()"
            (input)="onFieldChange('provinciaSeleccionada', $any($event.target).value)"
            [placeholder]="SECCION1_TEMPLATES.placeholderProvincia">
          <small class="form-hint">{{ SECCION1_TEMPLATES.hintGeoAutomatica }}</small>
        </div>
        <div class="form-field">
          <label class="label">{{ SECCION1_TEMPLATES.labelDistrito }} <span class="required">*</span></label>
          <input 
            type="text" 
            class="input" 
            [value]="distritoSeleccionadoSignal()"
            (input)="onFieldChange('distritoSeleccionado', $any($event.target).value)"
            [placeholder]="SECCION1_TEMPLATES.placeholderDistrito">
          <small class="form-hint">{{ SECCION1_TEMPLATES.hintGeoAutomatica }}</small>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group-section">
    <h4 class="section-title">Editar P√°rrafos</h4>
    
    <app-paragraph-editor
      fieldId="parrafoSeccion1_principal"
      [label]="SECCION1_TEMPLATES.labelParrafoPrincipal"
      [hint]="SECCION1_TEMPLATES.hintParrafoPrincipal"
      [rows]="8"
      [value]="parrafoPrincipalSignal()"
      (valueChange)="onFieldChange('parrafoSeccion1_principal', $event)">
    </app-paragraph-editor>

    <app-paragraph-editor
      fieldId="parrafoSeccion1_4"
      [label]="SECCION1_TEMPLATES.labelIntroduccionObjetivos"
      [hint]="SECCION1_TEMPLATES.hintIntroduccionObjetivos"
      [rows]="2"
      [value]="parrafoIntroduccionSignal()"
      (valueChange)="onFieldChange('parrafoSeccion1_4', $event)">
    </app-paragraph-editor>

    <!-- Objetivos Din√°micos -->
    <div class="form-group-section mt-lg">
      <div class="dynamic-list-header">
        <h4 class="section-title">{{ SECCION1_TEMPLATES.labelObjetivos }}</h4>
        <button type="button" class="btn btn--add" (click)="agregarObjetivo()">
          ‚ûï Agregar
        </button>
      </div>
      
      <div *ngFor="let objetivo of objetivosSignal(); let i = index; trackBy: trackByIndex" class="dynamic-list-item">
        <div class="dynamic-list-item-header">
          <label class="label">{{ SECCION1_TEMPLATES.labelObjetivoN }} {{ i + 1 }}</label>
          <button 
            type="button" 
            class="btn btn--remove" 
            (click)="eliminarObjetivo(i)"
            *ngIf="objetivosSignal().length > 1">
            üóëÔ∏è Eliminar
          </button>
        </div>
        <textarea 
          class="input"
          [ngModel]="objetivo"
          (ngModelChange)="actualizarObjetivo(i, $event)"
          rows="3"
          [placeholder]="SECCION1_TEMPLATES.placeholderObjetivo"></textarea>
      </div>
    </div>

    <div class="form-field mt-lg">
      <label class="label">{{ SECCION1_TEMPLATES.labelFotografias }}</label>
      <app-image-upload
        [fotografias]="fotografiasFormMulti"
        [sectionId]="seccionId"
        [photoPrefix]="PHOTO_PREFIX"
        [permitirMultiples]="true"
        [labelTitulo]="SECCION1_TEMPLATES.labelFotoTituloCompleto"
        [labelFuente]="SECCION1_TEMPLATES.labelFotoFuenteCompleto"
        [labelImagen]="SECCION1_TEMPLATES.labelFotoImagenCompleto"
        [placeholderTitulo]="SECCION1_TEMPLATES.placeholderFotoTitulo"
        [placeholderFuente]="SECCION1_TEMPLATES.placeholderFotoFuente"
        [tituloDefault]="SECCION1_TEMPLATES.tituloFotoDefault"
        [fuenteDefault]="SECCION1_TEMPLATES.fuenteFotoDefault"
        [requerido]="false"
        (fotografiasChange)="onFotografiasChange($event)">
      </app-image-upload>
    </div>
  </div>
</div>

