<div *ngIf="modoFormulario" class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">Informaci√≥n del Proyecto</h4>
    
    <div class="form-field">
      <label class="label">Nombre del Proyecto <span class="required">*</span></label>
      <input 
        type="text" 
        class="input" 
        placeholder="Ej: Proyecto Minero de Exploraci√≥n"
        [value]="projectNameSignal() === '____' ? '' : projectNameSignal()"
        (input)="onFieldChange('projectName', $any($event.target).value)">
    </div>
  </div>

  <div class="form-group-section">
    <h4 class="section-title">Cargar Datos de Centros Poblados</h4>
    
    <div class="form-field">
      <label class="label">Subir UBIGEO de Centro Poblado <span class="required">*</span></label>
      <div class="file-upload-wrapper">
        <input 
          type="file" 
          id="jsonFileInput" 
          accept=".json" 
          (change)="onJSONFileSelected($event)"
          style="display: none;">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="selectJSONFile()">
          Seleccionar archivo
        </button>
        <span *ngIf="jsonFileNameSignal()" class="file-name">{{ jsonFileNameSignal() }}</span>
        <span *ngIf="!jsonFileNameSignal()" class="file-name">Ning√∫n archivo seleccionado</span>
      </div>
      <small class="form-hint">Seleccione un archivo JSON con datos de centros poblados</small>
    </div>

    <div class="form-field" *ngIf="centrosPobladosJSONSignal().length > 0">
      <label class="label">Informaci√≥n Geogr√°fica</label>
      <div class="form-row">
        <div class="form-field">
          <label class="label">Departamento <span class="required">*</span></label>
          <input 
            type="text" 
            class="input" 
            [value]="departamentoSeleccionadoSignal()"
            (input)="onFieldChange('departamentoSeleccionado', $any($event.target).value)"
            placeholder="Ingrese el departamento">
          <small class="form-hint">Se completa autom√°ticamente desde el JSON, pero puede editarlo</small>
        </div>
        <div class="form-field">
          <label class="label">Provincia <span class="required">*</span></label>
          <input 
            type="text" 
            class="input" 
            [value]="provinciaSeleccionadaSignal()"
            (input)="onFieldChange('provinciaSeleccionada', $any($event.target).value)"
            placeholder="Ingrese la provincia">
          <small class="form-hint">Se completa autom√°ticamente desde el JSON, pero puede editarlo</small>
        </div>
        <div class="form-field">
          <label class="label">Distrito <span class="required">*</span></label>
          <input 
            type="text" 
            class="input" 
            [value]="distritoSeleccionadoSignal()"
            (input)="onFieldChange('distritoSeleccionado', $any($event.target).value)"
            placeholder="Ingrese el distrito">
          <small class="form-hint">Se completa autom√°ticamente desde el JSON, pero puede editarlo</small>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group-section">
    <h4 class="section-title">Editar P√°rrafos</h4>
    
    <app-paragraph-editor
      fieldId="parrafoSeccion1_principal"
      label="P√°rrafo Principal"
      hint="Edite el texto completo. Use Enter para crear nuevos p√°rrafos. Deje vac√≠o para usar el texto por defecto."
      [rows]="8"
      [value]="parrafoPrincipalSignal()"
      (valueChange)="onFieldChange('parrafoSeccion1_principal', $event)">
    </app-paragraph-editor>

    <app-paragraph-editor
      fieldId="parrafoSeccion1_4"
      label="Introducci√≥n a Objetivos"
      hint="Edite el texto completo. Deje vac√≠o para usar el texto por defecto."
      [rows]="2"
      [value]="parrafoIntroduccionSignal()"
      (valueChange)="onFieldChange('parrafoSeccion1_4', $event)">
    </app-paragraph-editor>

    <!-- Objetivos Din√°micos -->
    <div class="form-group-section mt-lg">
      <div class="dynamic-list-header">
        <h4 class="section-title">Objetivos de la L√≠nea Base Social</h4>
        <button type="button" class="btn btn--add" (click)="agregarObjetivo()">
          ‚ûï Agregar
        </button>
      </div>
      
      <div *ngFor="let objetivo of objetivosSignal(); let i = index; trackBy: trackByIndex" class="dynamic-list-item">
        <div class="dynamic-list-item-header">
          <label class="label">Objetivo {{ i + 1 }}</label>
          <button 
            type="button" 
            class="btn btn--remove" 
            (click)="eliminarObjetivo(i)"
            *ngIf="objetivosSignal().length > 1">
            üóëÔ∏è Eliminar
          </button>
        </div>
        <textarea 
          class="input"
          [ngModel]="objetivo"
          (ngModelChange)="actualizarObjetivo(i, $event)"
          rows="3"
          placeholder="Escriba el objetivo..."></textarea>
      </div>
    </div>

    <div class="form-field mt-lg">
      <label class="label">Fotograf√≠as</label>
      <app-image-upload
        [fotografias]="fotografiasFormMulti"
        [sectionId]="seccionId"
        [photoPrefix]="PHOTO_PREFIX"
        [permitirMultiples]="true"
        labelTitulo="T√≠tulo de la fotograf√≠a"
        labelFuente="Fuente de la fotograf√≠a"
        labelImagen="Fotograf√≠a - Imagen"
        placeholderTitulo="Ej: Fotograf√≠a de la secci√≥n 1"
        placeholderFuente="Ej: GEADES, 2024"
        tituloDefault="Secci√≥n 1"
        fuenteDefault="GEADES, 2024"
        [requerido]="false"
        (fotografiasChange)="onFotografiasChange($event)">
      </app-image-upload>
    </div>
  </div>
</div>

