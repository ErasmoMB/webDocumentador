<div *ngIf="!modoFormulario">
<h5>A.1.8. Infraestructura en salud, educación, recreativa y deportiva</h5>

<p style="margin-bottom: 10px;"><strong>a. Infraestructura en salud</strong></p>
<p class="text-justify" [innerHTML]="obtenerTextoSeccion12SaludCompletoConResaltado()"></p>

<app-table-wrapper title="Principales características del Puesto de Salud {{ obtenerNombreComunidadActual() }}" sectionId="3.1.4.A.1.8">
<table class="table-container">
    <thead>
        <tr>
            <th class="table-header">Categoría</th>
            <th class="table-header">Descripción</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of getCaracteristicasSaludTabla()">
            <td class="table-cell"><span *ngIf="item.categoria && item.categoria !== '____'" [appDataSource]="'manual'" [fieldName]="'categoria'">{{ item.categoria }}</span><span *ngIf="!item.categoria || item.categoria === '____'">____</span></td>
            <td class="table-cell" [class.text-left]="item.descripcion?.includes('•')" [innerHTML]="item.descripcion || '____'"></td>
        </tr>
        <tr *ngIf="!getCaracteristicasSaludTabla() || getCaracteristicasSaludTabla().length === 0">
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
        </tr>
    </tbody>
</table>
</app-table-wrapper>
<p class="source">Fuente:<span [appDataSource]="'manual'">GEADES (2024)</span></p>

<app-image-upload
    [modoVista]="true"
    [permitirMultiples]="true"
    [fotografias]="getFotografiasSaludVista()"
    [sectionId]="seccionId"
    [photoPrefix]="PHOTO_PREFIX_SALUD"
    [labelTitulo]="'Título'"
    [labelFuente]="'Fuente'"
    [labelImagen]="'Imagen'">
</app-image-upload>

<p style="margin-top: 20px; margin-bottom: 10px;"><strong>b. Infraestructura en educación</strong></p>
<p class="text-justify" [innerHTML]="obtenerTextoSeccion12EducacionCompletoConResaltado()"></p>

<app-table-wrapper title="Infraestructura educativa – CC {{ obtenerNombreComunidadActual() }} (2023)" sectionId="3.1.4.A.1.8">
<table class="table-container">
    <thead>
        <tr>
            <th class="table-header">Nombre de IE</th>
            <th class="table-header">Nivel</th>
            <th class="table-header">Tipo de Gestión</th>
            <th class="table-header">Cantidad de estudiantes</th>
            <th class="table-header">Porcentaje</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of getCantidadEstudiantesConPorcentajes()" [class.total-row]="item.institucion === 'Total'">
            <td class="table-cell">
                <span *ngIf="item.institucion && item.institucion !== '____'">
                    <strong *ngIf="item.institucion === 'Total'">{{ item.institucion }}</strong>
                    <span *ngIf="item.institucion !== 'Total'" [appDataSource]="'section'" [fieldName]="'institucion'">{{ item.institucion }}</span>
                </span>
                <span *ngIf="!item.institucion || item.institucion === '____'">____</span>
            </td>
            <td class="table-cell">
                <span *ngIf="item.nivel && item.nivel !== '____'" [appDataSource]="'section'" [fieldName]="'nivel'">
                    <strong *ngIf="item.institucion === 'Total'">{{ item.nivel }}</strong>
                    <span *ngIf="item.institucion !== 'Total'">{{ item.nivel }}</span>
                </span>
                <span *ngIf="!item.nivel || item.nivel === '____'">____</span>
            </td>
            <td class="table-cell">
                <span *ngIf="item.gestion && item.gestion !== '____'" [appDataSource]="'section'" [fieldName]="'gestion'">
                    <strong *ngIf="item.institucion === 'Total'">{{ item.gestion }}</strong>
                    <span *ngIf="item.institucion !== 'Total'">{{ item.gestion }}</span>
                </span>
                <span *ngIf="!item.gestion || item.gestion === '____'">____</span>
            </td>
            <td class="table-cell">
                <span *ngIf="item.total !== undefined && item.total !== '____'" [appDataSource]="item.institucion === 'Total' ? 'calculated' : 'section'" [fieldName]="'total'">
                    <strong *ngIf="item.institucion === 'Total'">{{ item.total }}</strong>
                    <span *ngIf="item.institucion !== 'Total'">{{ item.total }}</span>
                </span>
                <span *ngIf="item.total === undefined || item.total === '____'">____</span>
            </td>
            <td class="table-cell">
                <span *ngIf="item.porcentaje" [appDataSource]="'calculated'" appDataHighlight="calculated">
                    <strong *ngIf="item.institucion === 'Total'">{{ item.porcentaje }}</strong>
                    <span *ngIf="item.institucion !== 'Total'">{{ item.porcentaje }}</span>
                </span>
                <span *ngIf="!item.porcentaje">____</span>
            </td>
        </tr>
        <tr *ngIf="getCantidadEstudiantesConPorcentajes().length === 0">
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
        </tr>
    </tbody>
</table>
</app-table-wrapper>
<p class="source">Fuente:<span [appDataSource]="'manual'" [fieldName]="'textoInfraestructuraEducacionPost'">Censo Educativo 2023 – ESCALE (MINEDU)</span></p>

<p class="text-justify" [innerHTML]="obtenerTextoInfraestructuraEducacionPostConResaltado()"></p>

<app-table-wrapper title="Características y datos – IE {{ obtenerNombreComunidadActual() }}" sectionId="3.1.4.A.1.8">
<table class="table-container">
    <thead>
        <tr>
            <th class="table-header">Categoría</th>
            <th class="table-header">Descripción</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of getIEAyrocaTabla()">
            <td class="table-cell"><span *ngIf="item.categoria && item.categoria !== '____'" [appDataSource]="'manual'" [fieldName]="'categoria'">{{ item.categoria }}</span><span *ngIf="!item.categoria || item.categoria === '____'">____</span></td>
            <td class="table-cell" [class.text-left]="item.descripcion?.includes('•')" [innerHTML]="item.descripcion || '____'"></td>
        </tr>
        <tr *ngIf="!getIEAyrocaTabla() || getIEAyrocaTabla().length === 0">
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
        </tr>
    </tbody>
</table>
</app-table-wrapper>
<p class="source">Fuente:<span [appDataSource]="'manual'">GEADES (2024)</span></p>

<app-table-wrapper title="Características y datos – IE N°40270" sectionId="3.1.4.A.1.8">
<table class="table-container">
    <thead>
        <tr>
            <th class="table-header">Categoría</th>
            <th class="table-header">Descripción</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of getIE40270Tabla()">
            <td class="table-cell"><span *ngIf="item.categoria && item.categoria !== '____'" [appDataSource]="'manual'" [fieldName]="'categoria'">{{ item.categoria }}</span><span *ngIf="!item.categoria || item.categoria === '____'">____</span></td>
            <td class="table-cell" [class.text-left]="item.descripcion?.includes('•')" [innerHTML]="item.descripcion || '____'"></td>
        </tr>
        <tr *ngIf="!getIE40270Tabla() || getIE40270Tabla().length === 0">
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
        </tr>
    </tbody>
</table>
</app-table-wrapper>
<p class="source">Fuente:<span [appDataSource]="'manual'" [fieldName]="'textoAlumnosPorSexoGrado'">GEADES (2024)</span></p>

<p class="text-justify" [innerHTML]="obtenerTextoAlumnosPorSexoGradoConResaltado()"></p>

<app-table-wrapper title="Cantidad de alumnos según grado de enseñanza y sexo – IE {{ obtenerNombreComunidadActual() }}" sectionId="3.1.4.A.1.8">
<table class="table-container">
    <thead>
        <tr>
            <th class="table-header" rowspan="2">Nombre de IE</th>
            <th class="table-header" rowspan="2">Nivel</th>
            <th class="table-header" colspan="2">Total</th>
            <th class="table-header" colspan="2">3 años</th>
            <th class="table-header" colspan="2">4 años</th>
            <th class="table-header" colspan="2">5 años</th>
        </tr>
        <tr>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of getAlumnosIEAyrocaTabla()">
            <td class="table-cell"><span *ngIf="item.nombre && item.nombre !== '____'" [appDataSource]="'manual'" [fieldName]="'nombre'">{{ item.nombre }}</span><span *ngIf="!item.nombre || item.nombre === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.nivel && item.nivel !== '____'" [appDataSource]="'manual'" [fieldName]="'nivel'">{{ item.nivel }}</span><span *ngIf="!item.nivel || item.nivel === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.totalH !== undefined && item.totalH !== '____'" [appDataSource]="'manual'" [fieldName]="'totalH'">{{ item.totalH }}</span><span *ngIf="item.totalH === undefined || item.totalH === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.totalM !== undefined && item.totalM !== '____'" [appDataSource]="'manual'" [fieldName]="'totalM'">{{ item.totalM }}</span><span *ngIf="item.totalM === undefined || item.totalM === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.tresH !== undefined && item.tresH !== '____'" [appDataSource]="'manual'" [fieldName]="'tresH'">{{ item.tresH }}</span><span *ngIf="item.tresH === undefined || item.tresH === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.tresM !== undefined && item.tresM !== '____'" [appDataSource]="'manual'" [fieldName]="'tresM'">{{ item.tresM }}</span><span *ngIf="item.tresM === undefined || item.tresM === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.cuatroH !== undefined && item.cuatroH !== '____'" [appDataSource]="'manual'" [fieldName]="'cuatroH'">{{ item.cuatroH }}</span><span *ngIf="item.cuatroH === undefined || item.cuatroH === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.cuatroM !== undefined && item.cuatroM !== '____'" [appDataSource]="'manual'" [fieldName]="'cuatroM'">{{ item.cuatroM }}</span><span *ngIf="item.cuatroM === undefined || item.cuatroM === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.cincoH !== undefined && item.cincoH !== '____'" [appDataSource]="'manual'" [fieldName]="'cincoH'">{{ item.cincoH }}</span><span *ngIf="item.cincoH === undefined || item.cincoH === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.cincoM !== undefined && item.cincoM !== '____'" [appDataSource]="'manual'" [fieldName]="'cincoM'">{{ item.cincoM }}</span><span *ngIf="item.cincoM === undefined || item.cincoM === '____'">____</span></td>
        </tr>
        <tr *ngIf="!getAlumnosIEAyrocaTabla() || getAlumnosIEAyrocaTabla().length === 0">
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
        </tr>
    </tbody>
</table>
</app-table-wrapper>
<p class="source">Fuente:<span [appDataSource]="'manual'">GEADES (2024)</span></p>

<app-image-upload
    [modoVista]="true"
    [permitirMultiples]="true"
    [fotografias]="getFotografiasIEAyrocaVista()"
    [sectionId]="seccionId"
    [photoPrefix]="PHOTO_PREFIX_IE_AYROCA"
    [labelTitulo]="'Título'"
    [labelFuente]="'Fuente'"
    [labelImagen]="'Imagen'">
</app-image-upload>

<app-table-wrapper title="Cantidad de alumnos según grado de enseñanza y sexo – IE N°40270" sectionId="3.1.4.A.1.8">
<table class="table-container">
    <thead>
        <tr>
            <th class="table-header" rowspan="2">Nombre de IE</th>
            <th class="table-header" rowspan="2">Nivel</th>
            <th class="table-header" colspan="2">Total</th>
            <th class="table-header" colspan="2">1°</th>
            <th class="table-header" colspan="2">2°</th>
            <th class="table-header" colspan="2">3°</th>
            <th class="table-header" colspan="2">4°</th>
            <th class="table-header" colspan="2">5°</th>
            <th class="table-header" colspan="2">6°</th>
        </tr>
        <tr>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
            <th class="table-header">H</th>
            <th class="table-header">M</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of getAlumnosIE40270Tabla()">
            <td class="table-cell"><span *ngIf="item.nombre && item.nombre !== '____'" [appDataSource]="'manual'" [fieldName]="'nombre'">{{ item.nombre }}</span><span *ngIf="!item.nombre || item.nombre === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.nivel && item.nivel !== '____'" [appDataSource]="'manual'" [fieldName]="'nivel'">{{ item.nivel }}</span><span *ngIf="!item.nivel || item.nivel === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.totalH !== undefined && item.totalH !== '____'" [appDataSource]="'manual'" [fieldName]="'totalH'">{{ item.totalH }}</span><span *ngIf="item.totalH === undefined || item.totalH === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.totalM !== undefined && item.totalM !== '____'" [appDataSource]="'manual'" [fieldName]="'totalM'">{{ item.totalM }}</span><span *ngIf="item.totalM === undefined || item.totalM === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p1H !== undefined && item.p1H !== '____'" [appDataSource]="'manual'" [fieldName]="'p1H'">{{ item.p1H }}</span><span *ngIf="item.p1H === undefined || item.p1H === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p1M !== undefined && item.p1M !== '____'" [appDataSource]="'manual'" [fieldName]="'p1M'">{{ item.p1M }}</span><span *ngIf="item.p1M === undefined || item.p1M === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p2H !== undefined && item.p2H !== '____'" [appDataSource]="'manual'" [fieldName]="'p2H'">{{ item.p2H }}</span><span *ngIf="item.p2H === undefined || item.p2H === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p2M !== undefined && item.p2M !== '____'" [appDataSource]="'manual'" [fieldName]="'p2M'">{{ item.p2M }}</span><span *ngIf="item.p2M === undefined || item.p2M === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p3H !== undefined && item.p3H !== '____'" [appDataSource]="'manual'" [fieldName]="'p3H'">{{ item.p3H }}</span><span *ngIf="item.p3H === undefined || item.p3H === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p3M !== undefined && item.p3M !== '____'" [appDataSource]="'manual'" [fieldName]="'p3M'">{{ item.p3M }}</span><span *ngIf="item.p3M === undefined || item.p3M === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p4H !== undefined && item.p4H !== '____'" [appDataSource]="'manual'" [fieldName]="'p4H'">{{ item.p4H }}</span><span *ngIf="item.p4H === undefined || item.p4H === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p4M !== undefined && item.p4M !== '____'" [appDataSource]="'manual'" [fieldName]="'p4M'">{{ item.p4M }}</span><span *ngIf="item.p4M === undefined || item.p4M === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p5H !== undefined && item.p5H !== '____'" [appDataSource]="'manual'" [fieldName]="'p5H'">{{ item.p5H }}</span><span *ngIf="item.p5H === undefined || item.p5H === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p5M !== undefined && item.p5M !== '____'" [appDataSource]="'manual'" [fieldName]="'p5M'">{{ item.p5M }}</span><span *ngIf="item.p5M === undefined || item.p5M === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p6H !== undefined && item.p6H !== '____'" [appDataSource]="'manual'" [fieldName]="'p6H'">{{ item.p6H }}</span><span *ngIf="item.p6H === undefined || item.p6H === '____'">____</span></td>
            <td class="table-cell"><span *ngIf="item.p6M !== undefined && item.p6M !== '____'" [appDataSource]="'manual'" [fieldName]="'p6M'">{{ item.p6M }}</span><span *ngIf="item.p6M === undefined || item.p6M === '____'">____</span></td>
        </tr>
        <tr *ngIf="!getAlumnosIE40270Tabla() || getAlumnosIE40270Tabla().length === 0">
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
            <td class="table-cell">____</td>
        </tr>
    </tbody>
</table>
</app-table-wrapper>
<p class="source">Fuente:<span [appDataSource]="'manual'">GEADES (2024)</span></p>

<app-image-upload
    [modoVista]="true"
    [permitirMultiples]="true"
    [fotografias]="getFotografiasIE40270Vista()"
    [sectionId]="seccionId"
    [photoPrefix]="PHOTO_PREFIX_IE_40270"
    [labelTitulo]="'Título'"
    [labelFuente]="'Fuente'"
    [labelImagen]="'Imagen'">
</app-image-upload>

<p style="margin-top: 20px; margin-bottom: 10px;"><strong>c. Infraestructura en recreación</strong></p>
<p class="text-justify" [innerHTML]="obtenerTextoInfraestructuraRecreacionConResaltado()"></p>
<p class="text-justify" [innerHTML]="obtenerTextoInfraestructuraRecreacionDetalleConResaltado()"></p>

<app-image-upload
    [modoVista]="true"
    [permitirMultiples]="true"
    [fotografias]="getFotografiasRecreacionVista()"
    [sectionId]="seccionId"
    [photoPrefix]="PHOTO_PREFIX_RECREACION"
    [labelTitulo]="'Título'"
    [labelFuente]="'Fuente'"
    [labelImagen]="'Imagen'">
</app-image-upload>

<p style="margin-top: 20px; margin-bottom: 10px;"><strong>d. Infraestructura en deporte</strong></p>
<p class="text-justify" [innerHTML]="obtenerTextoInfraestructuraDeporteConResaltado()"></p>
<p class="text-justify" [innerHTML]="obtenerTextoInfraestructuraDeportDetalleConResaltado()"></p>

<app-image-upload
    [modoVista]="true"
    [permitirMultiples]="true"
    [fotografias]="getFotografiasDeporteVista()"
    [sectionId]="seccionId"
    [photoPrefix]="PHOTO_PREFIX_DEPORTE"
    [labelTitulo]="'Título'"
    [labelFuente]="'Fuente'"
    [labelImagen]="'Imagen'">
</app-image-upload>
</div>

<div *ngIf="modoFormulario" class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">A.1.8. Infraestructura en salud, educación, recreativa y deportiva</h4>
    
    <div class="form-group-section" style="margin-top: 20px;">
      <h4 class="section-title">a. Infraestructura en salud</h4>
      
      <div class="form-group-section" style="margin-top: 15px;">
        <h4 class="section-title">Editar Párrafos</h4>
        
        <app-paragraph-editor
          fieldId="parrafoSeccion12_salud_completo"
          label="Salud - Texto Completo"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="4"
          [value]="obtenerTextoSeccion12SaludCompleto()"
          (valueChange)="onFieldChange('parrafoSeccion12_salud_completo', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Tabla Características del Puesto de Salud</label>
        <app-dynamic-table
          [datos]="datos"
          [config]="caracteristicasSaludConfig"
          [columns]="[
            { field: 'categoria', label: 'Categoría', type: 'text', placeholder: 'Ej: Categoría' },
            { field: 'descripcion', label: 'Descripción', type: 'text', placeholder: 'Ej: Descripción' }
          ]"
          [tablaKey]="getTablaKeyCaracteristicasSalud()"
          [totalKey]="'categoria'"
          (tableUpdated)="onCaracteristicasSaludTableUpdated()">
        </app-dynamic-table>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Fotografías de Salud</label>
        <app-image-upload
          [fotografias]="fotografiasSaludFormMulti"
          [sectionId]="seccionId"
          [photoPrefix]="PHOTO_PREFIX_SALUD"
          [permitirMultiples]="true"
          labelTitulo="Título de la fotografía"
          labelFuente="Fuente de la fotografía"
          labelImagen="Fotografía - Imagen"
          placeholderTitulo="Ej: Puesto de Salud Ayroca"
          placeholderFuente="Ej: GEADES, 2024"
          tituloDefault="Puesto de Salud Ayroca"
          fuenteDefault="GEADES, 2024"
          [requerido]="false"
          (fotografiasChange)="onFotografiasSaludChange($event)">
        </app-image-upload>
      </div>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <h4 class="section-title">b. Infraestructura en educación</h4>
      
      <div class="form-group-section" style="margin-top: 15px;">
        <h4 class="section-title">Editar Párrafos</h4>
        
        <app-paragraph-editor
          fieldId="parrafoSeccion12_educacion_completo"
          label="Educación - Texto Completo"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="4"
          [value]="obtenerTextoSeccion12EducacionCompleto()"
          (valueChange)="onFieldChange('parrafoSeccion12_educacion_completo', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Tabla Infraestructura Educativa</label>
        <app-dynamic-table
          [datos]="datos"
          [config]="cantidadEstudiantesEducacionConfig"
          [columns]="[
            { field: 'institucion', label: 'Nombre de IE', type: 'text', placeholder: 'Ej: IE Ayroca' },
            { field: 'nivel', label: 'Nivel', type: 'text', placeholder: 'Inicial/Primaria' },
            { field: 'gestion', label: 'Tipo de Gestión', type: 'text', placeholder: 'Pública' },
            { field: 'total', label: 'Cantidad de estudiantes', type: 'number', placeholder: '0' },
            { field: 'porcentaje', label: 'Porcentaje', type: 'text', placeholder: '0%', readonly: true }
          ]"
          [tablaKey]="getTablaKeyCantidadEstudiantesEducacion()"
          [totalKey]="'institucion'"
          [customFieldChangeHandler]="onCantidadEstudiantesFieldChange.bind(this)"
          (tableUpdated)="onCantidadEstudiantesTableUpdated()">
        </app-dynamic-table>

        <div class="table-editor" *ngIf="getCantidadEstudiantesSinTotal().length > 0" style="margin-top: 10px;">
          <table class="editor-table">
            <tbody>
              <tr class="total-row">
                <td><input type="text" class="table-input" value="Total" readonly style="background-color: #f5f5f5;"></td>
                <td><input type="text" class="table-input" value="____" readonly style="background-color: #f5f5f5;"></td>
                <td><input type="text" class="table-input" value="____" readonly style="background-color: #f5f5f5;"></td>
                <td><input type="text" class="table-input" [value]="getTotalCantidadEstudiantes()" readonly style="background-color: #f5f5f5;"></td>
                <td><input type="text" class="table-input" value="100,00 %" readonly style="background-color: #f5f5f5;"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="form-group-section" style="margin-top: 20px;">
        <h4 class="section-title">Editar Párrafos</h4>
        
        <app-paragraph-editor
          fieldId="textoInfraestructuraEducacionPost"
          label="Infraestructura Educación - Post Tabla"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="2"
          [value]="obtenerTextoInfraestructuraEducacionPost()"
          (valueChange)="onFieldChange('textoInfraestructuraEducacionPost', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Tabla Características IE Ayroca</label>
        <app-dynamic-table
          [datos]="datos"
          [config]="ieAyrocaConfig"
          [columns]="[
            { field: 'categoria', label: 'Categoría', type: 'text', placeholder: 'Ej: Categoría' },
            { field: 'descripcion', label: 'Descripción', type: 'text', placeholder: 'Ej: Descripción' }
          ]"
          [tablaKey]="getTablaKeyIEAyroca()"
          [totalKey]="'categoria'"
          (tableUpdated)="onIEAyrocaTableUpdated()">
        </app-dynamic-table>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Fotografías IE Ayroca</label>
        <app-image-upload
          [fotografias]="fotografiasIEAyrocaFormMulti"
          [sectionId]="seccionId"
          [photoPrefix]="PHOTO_PREFIX_IE_AYROCA"
          [permitirMultiples]="true"
          labelTitulo="Título de la fotografía"
          labelFuente="Fuente de la fotografía"
          labelImagen="Fotografía - Imagen"
          placeholderTitulo="Ej: IE Ayroca"
          placeholderFuente="Ej: GEADES, 2024"
          tituloDefault="IE Ayroca"
          fuenteDefault="GEADES, 2024"
          [requerido]="false"
          (fotografiasChange)="onFotografiasIEAyrocaChange($event)">
        </app-image-upload>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Tabla Características IE N°40270</label>
        <app-dynamic-table
          [datos]="datos"
          [config]="ie40270Config"
          [columns]="[
            { field: 'categoria', label: 'Categoría', type: 'text', placeholder: 'Ej: Categoría' },
            { field: 'descripcion', label: 'Descripción', type: 'text', placeholder: 'Ej: Descripción' }
          ]"
          [tablaKey]="getTablaKeyIE40270()"
          [totalKey]="'categoria'"
          (tableUpdated)="onIE40270TableUpdated()">
        </app-dynamic-table>
      </div>

      <div class="form-group-section" style="margin-top: 20px;">
        <h4 class="section-title">Editar Párrafos</h4>
        
        <app-paragraph-editor
          fieldId="textoAlumnosPorSexoGrado"
          label="Alumnos por Sexo y Grado - Texto Completo"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="2"
          [value]="obtenerTextoAlumnosPorSexoGrado()"
          (valueChange)="onFieldChange('textoAlumnosPorSexoGrado', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Tabla Alumnos IE Ayroca</label>
        <app-dynamic-table
          [datos]="datos"
          [config]="alumnosIEAyrocaConfig"
          [columns]="[
            { field: 'nombre', label: 'Nombre de IE', type: 'text', placeholder: 'IE Ayroca' },
            { field: 'nivel', label: 'Nivel', type: 'text', placeholder: 'Inicial' },
            { field: 'totalH', label: 'Total H', type: 'number', placeholder: '0' },
            { field: 'totalM', label: 'Total M', type: 'number', placeholder: '0' },
            { field: 'tresH', label: '3 años H', type: 'number', placeholder: '0' },
            { field: 'tresM', label: '3 años M', type: 'number', placeholder: '0' },
            { field: 'cuatroH', label: '4 años H', type: 'number', placeholder: '0' },
            { field: 'cuatroM', label: '4 años M', type: 'number', placeholder: '0' },
            { field: 'cincoH', label: '5 años H', type: 'number', placeholder: '0' },
            { field: 'cincoM', label: '5 años M', type: 'number', placeholder: '0' }
          ]"
          [tablaKey]="getTablaKeyAlumnosIEAyroca()"
          [totalKey]="'nombre'"
          (tableUpdated)="onAlumnosIEAyrocaTableUpdated()">
        </app-dynamic-table>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Tabla Alumnos IE N°40270</label>
        <app-dynamic-table
          [datos]="datos"
          [config]="alumnosIE40270Config"
          [columns]="[
            { field: 'nombre', label: 'Nombre de IE', type: 'text', placeholder: 'IE N°40270' },
            { field: 'nivel', label: 'Nivel', type: 'text', placeholder: 'Primaria' },
            { field: 'totalH', label: 'Total H', type: 'number', placeholder: '0' },
            { field: 'totalM', label: 'Total M', type: 'number', placeholder: '0' },
            { field: 'p1H', label: '1° H', type: 'number', placeholder: '0' },
            { field: 'p1M', label: '1° M', type: 'number', placeholder: '0' },
            { field: 'p2H', label: '2° H', type: 'number', placeholder: '0' },
            { field: 'p2M', label: '2° M', type: 'number', placeholder: '0' },
            { field: 'p3H', label: '3° H', type: 'number', placeholder: '0' },
            { field: 'p3M', label: '3° M', type: 'number', placeholder: '0' },
            { field: 'p4H', label: '4° H', type: 'number', placeholder: '0' },
            { field: 'p4M', label: '4° M', type: 'number', placeholder: '0' },
            { field: 'p5H', label: '5° H', type: 'number', placeholder: '0' },
            { field: 'p5M', label: '5° M', type: 'number', placeholder: '0' },
            { field: 'p6H', label: '6° H', type: 'number', placeholder: '0' },
            { field: 'p6M', label: '6° M', type: 'number', placeholder: '0' }
          ]"
          [tablaKey]="getTablaKeyAlumnosIE40270()"
          [totalKey]="'nombre'"
          (tableUpdated)="onAlumnosIE40270TableUpdated()">
        </app-dynamic-table>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Fotografías IE N°40270</label>
        <app-image-upload
          [fotografias]="fotografiasIE40270FormMulti"
          [sectionId]="seccionId"
          [photoPrefix]="PHOTO_PREFIX_IE_40270"
          [permitirMultiples]="true"
          labelTitulo="Título de la fotografía"
          labelFuente="Fuente de la fotografía"
          labelImagen="Fotografía - Imagen"
          placeholderTitulo="Ej: IE N°40270"
          placeholderFuente="Ej: GEADES, 2024"
          tituloDefault="IE N°40270"
          fuenteDefault="GEADES, 2024"
          [requerido]="false"
          (fotografiasChange)="onFotografiasIE40270Change($event)">
        </app-image-upload>
      </div>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <h4 class="section-title">c. Infraestructura en recreación</h4>
      
      <div class="form-group-section" style="margin-top: 15px;">
        <h4 class="section-title">Editar Párrafos</h4>
        
        <app-paragraph-editor
          fieldId="textoInfraestructuraRecreacion"
          label="Infraestructura Recreación - Párrafo 1"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="3"
          [value]="obtenerTextoInfraestructuraRecreacion()"
          (valueChange)="onFieldChange('textoInfraestructuraRecreacion', $event)">
        </app-paragraph-editor>
        
        <app-paragraph-editor
          fieldId="textoInfraestructuraRecreacionDetalle"
          label="Infraestructura Recreación - Párrafo 2"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="2"
          [value]="obtenerTextoInfraestructuraRecreacionDetalle()"
          (valueChange)="onFieldChange('textoInfraestructuraRecreacionDetalle', $event)"
          style="margin-top: 15px;">
        </app-paragraph-editor>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Fotografías de Recreación</label>
        <app-image-upload
          [fotografias]="fotografiasRecreacionFormMulti"
          [sectionId]="seccionId"
          [photoPrefix]="PHOTO_PREFIX_RECREACION"
          [permitirMultiples]="true"
          labelTitulo="Título de la fotografía"
          labelFuente="Fuente de la fotografía"
          labelImagen="Fotografía - Imagen"
          placeholderTitulo="Ej: Parque recreacional en el anexo Ayroca"
          placeholderFuente="Ej: GEADES, 2024"
          tituloDefault="Parque recreacional en el anexo Ayroca"
          fuenteDefault="GEADES, 2024"
          [requerido]="false"
          (fotografiasChange)="onFotografiasRecreacionChange($event)">
        </app-image-upload>
      </div>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <h4 class="section-title">d. Infraestructura en deporte</h4>
      
      <div class="form-group-section" style="margin-top: 15px;">
        <h4 class="section-title">Editar Párrafos</h4>
        
        <app-paragraph-editor
          fieldId="textoInfraestructuraDeporte"
          label="Infraestructura Deporte - Párrafo 1"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="3"
          [value]="obtenerTextoInfraestructuraDeporte()"
          (valueChange)="onFieldChange('textoInfraestructuraDeporte', $event)">
        </app-paragraph-editor>
        
        <app-paragraph-editor
          fieldId="textoInfraestructuraDeportDetalle"
          label="Infraestructura Deporte - Párrafo 2"
          hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
          [rows]="2"
          [value]="obtenerTextoInfraestructuraDeportDetalle()"
          (valueChange)="onFieldChange('textoInfraestructuraDeportDetalle', $event)"
          style="margin-top: 15px;">
        </app-paragraph-editor>
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">Fotografías de Deporte</label>
        <app-image-upload
          [fotografias]="fotografiasDeporteFormMulti"
          [sectionId]="seccionId"
          [photoPrefix]="PHOTO_PREFIX_DEPORTE"
          [permitirMultiples]="true"
          labelTitulo="Título de la fotografía"
          labelFuente="Fuente de la fotografía"
          labelImagen="Fotografía - Imagen"
          placeholderTitulo="Ej: Losa deportiva en el anexo Ayroca"
          placeholderFuente="Ej: GEADES, 2024"
          tituloDefault="Losa deportiva en el anexo Ayroca"
          fuenteDefault="GEADES, 2024"
          [requerido]="false"
          (fotografiasChange)="onFotografiasDeporteChange($event)">
        </app-image-upload>
      </div>
    </div>
  </div>
</div>

