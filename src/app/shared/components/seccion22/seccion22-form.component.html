<div class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">B.1.1. Aspectos demográficos</h4>

    <div class="form-field mt-md">
      <label class="label">Texto Demografía</label>
      <textarea [value]="viewModel().textoDemografia" (change)="actualizarTextoDemografia($any($event.target).value)" rows="4" class="form-control" placeholder="Editar texto de demografía"></textarea>
    </div>

    <div class="form-field mt-md">
      <label class="label">Texto Grupo Etario</label>
      <textarea [value]="viewModel().textoGrupoEtario" (change)="actualizarTextoGrupoEtario($any($event.target).value)" rows="4" class="form-control" placeholder="Editar texto de grupo etario"></textarea>
    </div>

    <div class="form-field mt-lg">
      <label class="label">Título — Población según sexo</label>
      <input type="text" class="form-control" [(ngModel)]="datos[tituloKeyPoblacionSexoSignal()]" (ngModelChange)="onTituloCuadroPoblacionSexoChange($event)" placeholder="Ej: Población por sexo – CP Cahuacho (2017)">
    </div>

    <div class="form-field mt-md">
      <label class="label">Población por Sexo</label>
      <app-dynamic-table
        [datos]="datos"
        [sectionId]="seccionId"
        [config]="{ tablaKey: tablaKeyPoblacionSexoSignal(), totalKey: 'sexo', campoTotal: 'casos', campoPorcentaje: 'porcentaje', calcularPorcentajes: true, camposParaCalcular: ['casos'], noInicializarDesdeEstructura: true }"
        [columns]="[
          { field: 'sexo', label: 'Sexo', type: 'text', readonly: true },
          { field: 'casos', label: 'Casos', type: 'number' },
          { field: 'porcentaje', label: 'Porcentaje', type: 'text', readonly: true }
        ]"
        [tablaKey]="tablaKeyPoblacionSexoSignal()"
        [showAddButton]="false"
        [showDeleteButton]="false"
        (tableUpdated)="onPoblacionSexoUpdated($event)">
      </app-dynamic-table>
    </div>

    <div class="form-field mt-md">
      <label class="label">Fuente — Población por Sexo</label>
      <input type="text" class="form-control" [(ngModel)]="datos[fuenteKeyPoblacionSexoSignal()]" (ngModelChange)="onFuenteCuadroPoblacionSexoChange($event)" placeholder="Ej: Censos Nacionales 2017">
    </div>

    <div class="form-field mt-lg">
      <label class="label">Título — Población según grupo etario</label>
      <input type="text" class="form-control" [(ngModel)]="datos[tituloKeyPoblacionEtarioSignal()]" (ngModelChange)="onTituloCuadroPoblacionEtarioChange($event)" placeholder="Ej: Población por grupo etario – CP Cahuacho (2017)">
    </div>

    <div class="form-field mt-md">
      <label class="label">Población por Grupo Etario</label>
      <app-dynamic-table 
        [datos]="datos" 
        [sectionId]="seccionId"
        [config]="{ tablaKey: tablaKeyPoblacionEtarioSignal(), totalKey: 'categoria', campoTotal: 'casos', campoPorcentaje: 'porcentaje', calcularPorcentajes: true, camposParaCalcular: ['casos'], noInicializarDesdeEstructura: true }" 
        [columns]="[
          { field: 'categoria', label: 'Categoría', type: 'text', readonly: true },
          { field: 'casos', label: 'Casos', type: 'number' },
          { field: 'porcentaje', label: 'Porcentaje', type: 'text', readonly: true }
        ]"
        [tablaKey]="tablaKeyPoblacionEtarioSignal()"
        [showAddButton]="false"
        [showDeleteButton]="false"
        (tableUpdated)="onPoblacionEtarioUpdated($event)">
      </app-dynamic-table>
    </div>

    <div class="form-field mt-md">
      <label class="label">Fuente — Población por Grupo Etario</label>
      <input type="text" class="form-control" [(ngModel)]="datos[fuenteKeyPoblacionEtarioSignal()]" (ngModelChange)="onFuenteCuadroPoblacionEtarioChange($event)" placeholder="Ej: Censos Nacionales 2017">
    </div>

    <div class="form-field mt-lg">
      <label class="label">Fotografías</label>
      <app-image-upload [fotografias]="viewModel().fotos" [sectionId]="seccionId" [photoPrefix]="photoPrefixSignal()" [mostrarTitulo]="true" [mostrarFuente]="true" (fotografiasChange)="onFotografiasChange($event)"></app-image-upload>
    </div>
  </div>
</div>