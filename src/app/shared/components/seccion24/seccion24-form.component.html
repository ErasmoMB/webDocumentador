<div class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">{{ SECCION24_TEMPLATES.tituloSeccion }}</h4>

    <div class="form-group-section" style="margin-top: 20px;">
      <h4 class="section-title">{{ SECCION24_TEMPLATES.tituloEditarParrafos }}</h4>
      <app-paragraph-editor
        fieldId="textoIntroActividadesEconomicasAISI"
        [label]="SECCION24_TEMPLATES.labelIntroParrafo1"
        [rows]="4"
        [value]="viewModel().textos.intro"
        (valueChange)="actualizarTexto('textoIntroActividadesEconomicasAISI', $event)">
      </app-paragraph-editor>

      <app-paragraph-editor
        fieldId="textoIntroActividadesEconomicasAISI_parte2"
        [label]="SECCION24_TEMPLATES.labelIntroParrafo2"
        [rows]="4"
        [value]="viewModel().textos.introLong"
        (valueChange)="actualizarIntroLong($event)">
      </app-paragraph-editor>
    </div>

    <div class="form-field" style="margin-top: 20px;">
      <div class="form-field">
        <label class="label">{{ SECCION24_TEMPLATES.labelCuadroTitulo }}</label>
        <input type="text" class="input" [(ngModel)]="datos['cuadroTituloActividadesEconomicasAISI']" (ngModelChange)="onFieldChange('cuadroTituloActividadesEconomicasAISI', $event)" [placeholder]="SECCION24_TEMPLATES.placeholderCuadroTitulo" />
      </div>
      <label class="label">{{ SECCION24_TEMPLATES.labelCuadroPrincipal.replace('{centroPoblado}', viewModel().centroPoblado || SECCION24_TEMPLATES.centroPobladoDefault) }}</label>
      <app-dynamic-table
        [datos]="formDataSignal()"
        [sectionId]="seccionId"
        [config]="actividadesEconomicasConfig"
        [columns]="[
          { field: 'actividad', label: SECCION24_TEMPLATES.labelActividadEconomica, type: 'text', placeholder: SECCION24_TEMPLATES.placeholderActividad },
          { field: 'casos', label: SECCION24_TEMPLATES.labelCasos, type: 'number', placeholder: SECCION24_TEMPLATES.placeholderCasos },
          { field: 'porcentaje', label: SECCION24_TEMPLATES.labelPorcentaje, type: 'text', placeholder: SECCION24_TEMPLATES.placeholderPorcentaje, readonly: true }
        ]"
        [tablaKey]="tablaKeyActividadesSignal()"
        (tableUpdated)="onActividadesEconomicasChange($event)">
      </app-dynamic-table>

      <div class="form-field" style="margin-top: 12px;">
        <label class="label">{{ SECCION24_TEMPLATES.labelFuente }}</label>
        <input type="text" class="input" [value]="viewModel().textos.fuente" (input)="actualizarFuente($any($event.target).value)" [placeholder]="SECCION24_TEMPLATES.placeholderFuente" />
      </div>
    </div>

    <div class="form-group-section" style="margin-top: 20px;">
      <h4 class="section-title">{{ SECCION24_TEMPLATES.tituloEditarParrafos }}</h4>
      <app-paragraph-editor
        fieldId="textoActividadesEconomicasAISI"
        [label]="SECCION24_TEMPLATES.labelAnalisisTextoCompleto"
        [rows]="4"
        [value]="viewModel().textos.analisis"
        (valueChange)="actualizarTexto('textoActividadesEconomicasAISI', $event)">
      </app-paragraph-editor>
    </div>

    <div class="form-field" style="margin-top: 20px;">
      <label class="label">{{ SECCION24_TEMPLATES.labelFotosActividades }}</label>
      <app-image-upload
          [fotografias]="fotosActividadesSignal()"
          [sectionId]="seccionId"
          [photoPrefix]="'fotografiaActividadesEconomicas'"
          [permitirMultiples]="true"
          [labelTitulo]="SECCION24_TEMPLATES.labelFotoTitulo"
          [labelFuente]="SECCION24_TEMPLATES.labelFotoFuente"
          [labelImagen]="SECCION24_TEMPLATES.labelFotoImagen"
          (fotografiasChange)="onFotografiasChangeHandler($event, 'fotografiaActividadesEconomicas')">
        </app-image-upload>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <h4 class="section-title">{{ SECCION24_TEMPLATES.tituloMercado }}</h4>
      <app-paragraph-editor
        fieldId="textoMercadoProductos"
        [label]="SECCION24_TEMPLATES.labelMercadoTextoCompleto"
        [rows]="6"
        [value]="viewModel().textos.mercado"
        (valueChange)="actualizarTexto('textoMercadoProductos', $event)">
      </app-paragraph-editor>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">{{ SECCION24_TEMPLATES.labelCiudadOrigen }}</label>
        <input type="text" class="input" [value]="viewModel().ciudadOrigenComercio" (input)="actualizarCiudadOrigenComercio($any($event.target).value)" [placeholder]="SECCION24_TEMPLATES.placeholderCiudadOrigen">
      </div>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">{{ SECCION24_TEMPLATES.labelFotosMercado }}</label>
        <app-image-upload
          [fotografias]="fotosMercadoSignal()"
          [sectionId]="seccionId"
          [photoPrefix]="'fotografiaMercado'"
          [permitirMultiples]="true"
          (fotografiasChange)="onFotografiasChangeHandler($event, 'fotografiaMercado')">
        </app-image-upload>
      </div>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <h4 class="section-title">{{ SECCION24_TEMPLATES.tituloHabitos }}</h4>
      <app-paragraph-editor
        fieldId="textoHabitosConsumo"
        [label]="SECCION24_TEMPLATES.labelHabitosTextoCompleto"
        [rows]="8"
        [value]="viewModel().textos.habitos"
        (valueChange)="actualizarTexto('textoHabitosConsumo', $event)">
      </app-paragraph-editor>

      <div class="form-field" style="margin-top: 20px;">
        <label class="label">{{ SECCION24_TEMPLATES.labelFotosHabitos }}</label>
        <app-image-upload
          [fotografias]="fotosCacheSignal()"
          [sectionId]="seccionId"
          [photoPrefix]="photoPrefixSignal()"
          [permitirMultiples]="true"
          (fotografiasChange)="onFotografiasChangeHandler($event)">
        </app-image-upload>
      </div>
    </div>
  </div>
</div>
