<div class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">B.1.8. Indicadores de salud</h4>

    <div class="form-group-section mt-lg">
      <h4 class="section-title">a. Natalidad y Mortalidad</h4>

      <div class="form-group-section mt-md">
        <h4 class="section-title">Editar Párrafos</h4>

        <app-paragraph-editor
          fieldId="textoNatalidadCP1"
          label="Natalidad - Párrafo 1"
          [rows]="3"
          [value]="viewModel().textoNatalidadCP1"
          (valueChange)="actualizarTexto('textoNatalidadCP1', $event)">
        </app-paragraph-editor>

        <app-paragraph-editor
          fieldId="textoNatalidadCP2"
          label="Natalidad - Párrafo 2"
          [rows]="3"
          [value]="viewModel().textoNatalidadCP2"
          (valueChange)="actualizarTexto('textoNatalidadCP2', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field mt-lg">
        <label class="label">Título — Indicadores de natalidad y mortalidad</label>
        <input type="text" class="form-control" [value]="viewModel().tituloNatalidad" (input)="actualizarTexto('tituloNatalidadMortalidad', $any($event.target).value)" placeholder="Ej: Indicadores de natalidad y mortalidad – CP {{ viewModel().centroPoblado }}">

        <label class="label mt-sm">Tabla Indicadores de natalidad y mortalidad</label>
        <app-dynamic-table
          [datos]="getNatalidadTablaData()"
          [sectionId]="seccionId"
          [config]="natalidadConfig"
          [columns]="[ { field: 'anio', label: 'Año', type: 'text' }, { field: 'natalidad', label: 'Natalidad', type: 'number' }, { field: 'mortalidad', label: 'Mortalidad', type: 'number' } ]"
          [tablaKey]="getNatalidadTablaKey()"
          [totalKey]="'anio'"
          (tableUpdated)="onTablaUpdated(getNatalidadTablaKey(), $event)">
        </app-dynamic-table>

        <label class="label mt-md">Fuente</label>
        <input type="text" class="form-control" [value]="viewModel().fuenteNatalidad" (input)="actualizarTexto('fuenteNatalidadMortalidad', $any($event.target).value)" placeholder="Ej: GEADES (2024)">
      </div>
    </div>

    <div class="form-group-section mt-xl">
      <h4 class="section-title">b. Morbilidad</h4>

      <div class="form-group-section mt-md">
        <h4 class="section-title">Editar Párrafos</h4>

        <app-paragraph-editor
          fieldId="textoMorbilidadCP"
          label="Morbilidad - Texto Completo"
          [rows]="4"
          [value]="viewModel().textoMorbilidadCP"
          (valueChange)="actualizarTexto('textoMorbilidadCP', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field mt-lg">
        <label class="label">Título — Casos por grupos de morbilidad</label>
        <input type="text" class="form-control" [value]="viewModel().tituloMorbilidad" (input)="actualizarTexto('tituloMorbilidad', $any($event.target).value)" placeholder="Ej: Casos por grupos de morbilidad – Distrito {{ viewModel().centroPoblado }} (2023)">

        <label class="label">Tabla Casos por grupos de morbilidad</label>
        <app-dynamic-table
          [datos]="getMorbilidadTablaData()"
          [sectionId]="seccionId"
          [config]="morbilidadConfig"
          [columns]="[ { field: 'grupo', label: 'Grupo de Morbilidad', type: 'text' }, { field: 'edad0_11', label: '0 – 11', type: 'number' }, { field: 'edad12_17', label: '12 – 17', type: 'number' }, { field: 'edad18_29', label: '18 – 29', type: 'number' }, { field: 'edad30_59', label: '30 – 59', type: 'number' }, { field: 'edad60_mas', label: '60 - >', type: 'number' }, { field: 'casos', label: 'Casos Totales', type: 'number' } ]"
          [tablaKey]="getMorbilidadTablaKey()"
          [totalKey]="'grupo'"
          (tableUpdated)="onTablaUpdated(getMorbilidadTablaKey(), $event)">
        </app-dynamic-table>

        <label class="label mt-md">Fuente</label>
        <input type="text" class="form-control" [value]="viewModel().fuenteMorbilidad" (input)="actualizarTexto('fuenteMorbilidad', $any($event.target).value)" placeholder="Ej: REUNIS (2024)">
      </div>
    </div>

    <div class="form-group-section mt-xl">
      <h4 class="section-title">c. Población afiliada a Seguros de Salud</h4>

      <div class="form-group-section mt-md">
        <h4 class="section-title">Editar Párrafos</h4>

        <app-paragraph-editor
          fieldId="textoAfiliacionSalud"
          label="Población afiliada a Seguros de Salud - Texto Completo"
          [rows]="3"
          [value]="viewModel().textoAfiliacionSalud"
          (valueChange)="actualizarTexto('textoAfiliacionSalud', $event)">
        </app-paragraph-editor>
      </div>

      <div class="form-field mt-lg">
        <label class="label">Título — Población según tipo de seguro de salud afiliado</label>
        <input type="text" class="form-control" [value]="viewModel().tituloAfiliacion" (input)="actualizarTexto('tituloAfiliacionSalud', $any($event.target).value)" placeholder="Ej: Población según tipo de seguro de salud afiliado – CP {{ viewModel().centroPoblado }} (2017)">

        <label class="label">Tabla Población según tipo de seguro de salud afiliado</label>
        <app-dynamic-table
          [datos]="getAfiliacionTablaData()"
          [sectionId]="seccionId"
          [config]="afiliacionConfig"
          [columns]="[ { field: 'categoria', label: 'Categoría', type: 'text' }, { field: 'casos', label: 'Casos', type: 'number' }, { field: 'porcentaje', label: 'Porcentaje', type: 'text', readonly: true } ]"
          [tablaKey]="getAfiliacionTablaKey()"
          [totalKey]="'categoria'"
          [showAddButton]="false"
          [showDeleteButton]="false"
          (tableUpdated)="onTablaUpdated(getAfiliacionTablaKey(), $event)">
        </app-dynamic-table>

        <label class="label mt-md">Fuente</label>
        <input type="text" class="form-control" [value]="viewModel().fuenteAfiliacion" (input)="actualizarTexto('fuenteAfiliacionSalud', $any($event.target).value)" placeholder="Ej: Censos Nacionales 2017">
      </div>
    </div>

    <div class="form-field mt-xl">
      <label class="label">Fotografías de Indicadores de salud</label>
      <app-image-upload
        [fotografias]="fotografiasFormMulti"
        [sectionId]="seccionId"
        [photoPrefix]="PHOTO_PREFIX"
        [permitirMultiples]="true"
        (fotografiasChange)="onFotografiasChange($event)">
      </app-image-upload>
    </div>
  </div>
</div>
