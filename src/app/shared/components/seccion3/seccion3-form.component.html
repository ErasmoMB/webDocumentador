<div class="form-group-section">
  <h4 class="section-title">{{ SECCION3_TEMPLATES.tituloSeccion }}</h4>

  <div class="form-group-section mt-lg">
    <h4 class="section-title">{{ SECCION3_TEMPLATES.tituloMetodologia }}</h4>
    
    <app-paragraph-editor
      fieldId="parrafoSeccion3_metodologia"
      [label]="SECCION3_TEMPLATES.tituloMetodologia"
      [hint]="SECCION3_TEMPLATES.hintMetodologia"
      [rows]="3"
      [value]="parrafoMetodologia.value()"
      (valueChange)="parrafoMetodologia.update($event)">
    </app-paragraph-editor>
  </div>

  <div class="form-group-section mt-xl">
    <h4 class="section-title">{{ SECCION3_TEMPLATES.tituloFuentesPrimarias }}</h4>
    
    <div class="form-group-section mt-md">
      <h4 class="section-title">{{ SECCION3_TEMPLATES.tituloEditarParrafos }}</h4>
      
      <app-paragraph-editor
        fieldId="parrafoSeccion3_fuentes_primarias"
        [label]="SECCION3_TEMPLATES.tituloFuentesPrimarias"
        [hint]="SECCION3_TEMPLATES.hintFuentesPrimarias"
        [rows]="3"
        [value]="parrafoFuentesPrimarias.value()"
        (valueChange)="parrafoFuentesPrimarias.update($event)">
      </app-paragraph-editor>
    </div>

    <div class="form-field mt-lg">
      <label class="label">{{ SECCION3_TEMPLATES.labelCantidadEntrevistas }}</label>
      <input 
        type="number" 
        class="input" 
        [placeholder]="SECCION3_TEMPLATES.placeholderCantidadEntrevistas"
        [ngModel]="cantidadEntrevistas.value()"
        (ngModelChange)="cantidadEntrevistas.update($event)">
    </div>

    <div class="form-field mt-md">
      <label class="label">{{ SECCION3_TEMPLATES.labelFechaTrabajoCampo }}</label>
      <input 
        type="text" 
        class="input" 
        [placeholder]="SECCION3_TEMPLATES.placeholderFechaTrabajoCampo"
        [ngModel]="fechaTrabajoCampo.value()"
        (ngModelChange)="fechaTrabajoCampo.update($event)">
    </div>

    <div class="form-field mt-lg">
      <label class="label">{{ SECCION3_TEMPLATES.labelTituloTabla }} <span class="required">{{ SECCION3_TEMPLATES.labelRequired }}</span></label>
      <input 
        type="text" 
        class="input" 
        [placeholder]="SECCION3_TEMPLATES.placeholderTituloTabla"
        [ngModel]="cuadroTituloEntrevistados.value()"
        (ngModelChange)="cuadroTituloEntrevistados.update($event)">
    </div>

    <div class="form-field mt-lg">
      <label class="label">{{ SECCION3_TEMPLATES.labelListaEntrevistados }}</label>
      <app-dynamic-table
        [datos]="datos"
        [sectionId]="seccionId"
        [config]="entrevistadosConfig"
        [columns]="columnasEntrevistados"
        [tablaKey]="'entrevistados'"
        [totalKey]="'nombre'"
        (tableUpdated)="onTablaUpdated($event)">
      </app-dynamic-table>
    </div>

    <div class="form-field mt-md">
      <label class="label">{{ SECCION3_TEMPLATES.labelFuenteTabla }} <span class="required">{{ SECCION3_TEMPLATES.labelRequired }}</span></label>
      <input 
        type="text" 
        class="input" 
        [placeholder]="SECCION3_TEMPLATES.placeholderFuenteTabla"
        [ngModel]="cuadroFuenteEntrevistados.value()"
        (ngModelChange)="cuadroFuenteEntrevistados.update($event)">
    </div>
  </div>

  <div class="form-group-section mt-xl">
    <h4 class="section-title">{{ SECCION3_TEMPLATES.tituloFuentesSecundarias }}</h4>
    
    <div class="form-group-section mt-md">
      <h4 class="section-title">{{ SECCION3_TEMPLATES.tituloEditarParrafos }}</h4>
      
      <app-paragraph-editor
        fieldId="parrafoSeccion3_fuentes_secundarias"
        [label]="SECCION3_TEMPLATES.tituloFuentesSecundariasIntro"
        [hint]="SECCION3_TEMPLATES.hintFuentesSecundarias"
        [rows]="2"
        [value]="parrafoFuentesSecundarias.value()"
        (valueChange)="parrafoFuentesSecundarias.update($event)">
      </app-paragraph-editor>
    </div>

    <div class="form-group-section mt-lg">
      <h4 class="section-title">{{ SECCION3_TEMPLATES.labelFuentesSecundarias }}</h4>
    
      <div class="form-field fuente-item" *ngFor="let fuente of fuentesSecundariasLista.value(); let i = index; trackBy: trackByFuente">
        <input 
          type="text" 
          class="input" 
          [ngModel]="fuente"
          (ngModelChange)="actualizarFuenteSecundaria(i, $event)"
          (keyup.enter)="$any($event.target).blur()">
        <button 
          type="button" 
          class="btn btn-danger" 
          (click)="eliminarFuenteSecundaria(i)">
          {{ SECCION3_TEMPLATES.btnEliminar }}
        </button>
      </div>

      <div class="form-field">
        <button 
          type="button" 
          class="btn btn-primary btn-full" 
          (click)="agregarFuenteSecundaria()">
          {{ SECCION3_TEMPLATES.btnAgregarFuente }}
        </button>
      </div>
    </div>
  </div>

  <div class="form-field" style="margin-top: 20px;">
    <label class="label">{{ SECCION3_TEMPLATES.labelFotografias }}</label>
    <app-image-upload
      [fotografias]="fotografias"
      [sectionId]="seccionId"
      [photoPrefix]="photoPrefix"
      [permitirMultiples]="true"
      [key]="key"
      [labelTitulo]="SECCION3_TEMPLATES.labelFotoTituloCompleto"
      [labelFuente]="SECCION3_TEMPLATES.labelFotoFuenteCompleto"
      [labelImagen]="SECCION3_TEMPLATES.labelFotoImagenCompleto"
      [placeholderTitulo]="SECCION3_TEMPLATES.placeholderFotoTitulo"
      [placeholderFuente]="SECCION3_TEMPLATES.placeholderFotoFuente"
      [tituloDefault]="SECCION3_TEMPLATES.tituloFotoDefault"
      [fuenteDefault]="SECCION3_TEMPLATES.fuenteFotoDefault"
      [requerido]="false"
      (fotografiasChange)="onFotografiasChange($event)">
    </app-image-upload>
  </div>
</div>
