<div *ngIf="viewModel$ | async as vm">
  <div *ngIf="!modoFormulario">
    <h5>B.1.9. Indicadores de educación</h5>
    <div *ngIf="vm.data.parrafoSeccion30_indicadores_educacion_intro; else indicadoresEducacionIntroDefault" class="text-justify" [innerHTML]="vm.parrafoSeccion30_indicadores_educacion_intro"></div>
    <ng-template #indicadoresEducacionIntroDefault>
        <p class="text-justify">La educación es un pilar fundamental para el desarrollo social y económico de una comunidad. En ese sentido, los indicadores de educación juegan un papel crucial al proporcionar una visión clara del estado actual del sistema educativo y su impacto en la población. Este apartado se centra en dos indicadores clave: el nivel educativo de la población y la tasa de analfabetismo. El análisis de estos indicadores permite comprender mejor las fortalezas y desafíos del sistema educativo local, así como diseñar estrategias efectivas para mejorar la calidad educativa y reducir las desigualdades en el acceso a la educación.</p>
    </ng-template>

    <p class="mt-lg mb-sm"><strong>a. Nivel Educativo de la población</strong></p>
    <p class="text-justify">En el CP <span>{{ vm.data.centroPobladoAISI || '____' }}</span>, el nivel educativo alcanzado por la mayor parte de la población de 15 años a más es la secundaria, pues representan el <span>{{ vm.nivelMayoritario?.porcentaje || '____' }}</span>. En segundo lugar, se hallan aquellos que cuentan con primaria (<span>{{ vm.nivelSegundo?.porcentaje || '____' }}</span>). Por otro lado, la categoría minoritaria corresponde a aquellos sin nivel educativo o que solo alcanzaron el inicial, con un <span>{{ vm.nivelMinoritario?.porcentaje || '____' }}</span>.</p>

    <app-table-wrapper title="Población de 15 años a más según nivel educativo alcanzado – CP {{ vm.data.centroPobladoAISI || 'Cahuacho' }} (2017)" sectionId="3.1.4.B.1.9">
      <app-generic-table
        [data]="vm.nivelEducativoAISIConPorcentajes"
        [config]="nivelEducativoConfig">
      </app-generic-table>
    </app-table-wrapper>
    <p class="source">FUENTE: Censos Nacionales 2017: XII de Población, VII de Vivienda y III de Comunidades Indígenas</p>

    <p class="mt-lg mb-sm"><strong>b. Tasa de analfabetismo</strong></p>
    <p class="text-justify">En el CP <span>{{ vm.data.centroPobladoAISI || '____' }}</span>, tomando en cuenta a la población de 15 años a más, las personas que no saben leer ni escribir llegan a la cantidad de <span>{{ vm.data['cantidadAnalfabetos'] || '____' }}</span>. Esto representa una tasa de analfabetismo del <span>{{ vm.data['tasaAnalfabetismo'] || '____' }}<span *ngIf="vm.data['tasaAnalfabetismo'] !== undefined && vm.data['tasaAnalfabetismo'] !== null">%</span></span> en esta localidad.</p>

    <app-table-wrapper title="Tasa de analfabetismo en población de 15 años a más – CP {{ vm.data.centroPobladoAISI || 'Cahuacho' }} (2017)" sectionId="3.1.4.B.1.9">
      <app-generic-table
        [data]="vm.tasaAnalfabetismoAISIConPorcentajes"
        [config]="tasaAnalfabetismoConfig">
      </app-generic-table>
    </app-table-wrapper>
    <p class="source">FUENTE: Censos Nacionales 2017: XII de Población, VII de Vivienda y III de Comunidades Indígenas</p>

    <app-image-upload
        [modoVista]="true"
        [permitirMultiples]="true"
        [fotografias]="vm.fotografiasVista"
        [sectionId]="seccionId"
        [photoPrefix]="PHOTO_PREFIX"
        [labelTitulo]="'Título'"
        [labelFuente]="'Fuente'"
        [labelImagen]="'Imagen'">
    </app-image-upload>
  </div>

<div *ngIf="modoFormulario" class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">B.1.9. Indicadores de educación</h4>
    
    <div class="form-group-section mt-lg">
      <h4 class="section-title">Editar Párrafos</h4>
      
      <app-paragraph-editor
        fieldId="parrafoSeccion30_indicadores_educacion_intro"
        label="Introducción - Indicadores de Educación"
        hint="Edite el texto completo. Deje vacío para usar el texto por defecto."
        [rows]="4"
        [value]="vm.data.parrafoSeccion30_indicadores_educacion_intro || ''"
        (valueChange)="onFieldChange('parrafoSeccion30_indicadores_educacion_intro', $event)">
      </app-paragraph-editor>

      <app-paragraph-editor
        fieldId="textoNivelEducativo"
        label="Nivel Educativo - Texto Completo"
        hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
        [rows]="3"
        [value]="vm.data.textoNivelEducativo || ''"
        (valueChange)="onFieldChange('textoNivelEducativo', $event)">
      </app-paragraph-editor>

      <app-paragraph-editor
        fieldId="textoTasaAnalfabetismo"
        label="Tasa de Analfabetismo - Texto Completo"
        hint="Edite el texto completo. Use Enter para crear nuevos párrafos. Deje vacío para usar el texto por defecto."
        [rows]="3"
        [value]="vm.data.textoTasaAnalfabetismo || ''"
        (valueChange)="onFieldChange('textoTasaAnalfabetismo', $event)">
      </app-paragraph-editor>
    </div>

    <div class="form-field mt-xl">
      <label class="label">Tabla Población de 15 años a más según nivel educativo alcanzado</label>
        <app-dynamic-table
          [datos]="vm.data"
          [sectionId]="seccionId"
          [config]="nivelEducativoDynamicConfig"
          (tableUpdated)="onNivelEducativoTableUpdated()">
        </app-dynamic-table>
    </div>

    <div class="form-field mt-xl">
      <label class="label">Tabla Tasa de analfabetismo en población de 15 años a más</label>
        <app-dynamic-table
          [datos]="vm.data"
          [sectionId]="seccionId"
          [config]="tasaAnalfabetismoDynamicConfig"
          (tableUpdated)="onTasaAnalfabetismoTableUpdated()">
        </app-dynamic-table>
    </div>

    <div class="form-field mt-lg">
      <label class="label">Fotografías de Indicadores de educación</label>
      <app-image-upload
        [fotografias]="fotografiasCahuachoB19FormMulti"
        [sectionId]="seccionId"
        [photoPrefix]="PHOTO_PREFIX_CAHUACHO_B19"
        [permitirMultiples]="true"
        labelTitulo="Título de la fotografía"
        labelFuente="Fuente de la fotografía"
        labelImagen="Fotografía - Imagen"
        placeholderTitulo="Ej: Indicadores de educación"
        placeholderFuente="Ej: GEADES, 2024"
        tituloDefault="Indicadores de educación"
        fuenteDefault="GEADES, 2024"
        [requerido]="false"
        (fotografiasChange)="onFotografiasChange($event)">
      </app-image-upload>
    </div>
  </div>
</div>
