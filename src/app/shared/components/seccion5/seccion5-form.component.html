<div class="formulario-seccion">
  <div class="form-group-section">
    <h4 class="section-title">{{ SECCION5_TEMPLATES.tituloSubseccion }}</h4>
    
    <div class="form-group-section mt-lg">
      <h4 class="section-title">{{ SECCION5_TEMPLATES.tituloEditarParrafos }}</h4>
      
      <app-paragraph-editor
        [fieldId]="'parrafoSeccion5_institucionalidad' + obtenerPrefijoGrupo()"
        [label]="SECCION5_TEMPLATES.labelInstitucionalidad"
        [hint]="SECCION5_TEMPLATES.hintInstitucionalidad"
        [rows]="6"
        [value]="obtenerParrafoInstitucionalidad()"
        (valueChange)="projectFacade.setField(seccionId, null, 'parrafoSeccion5_institucionalidad' + obtenerPrefijoGrupo(), $event)">
      </app-paragraph-editor>
    </div>

    <div class="form-field" style="margin-top: 20px;">
      <label class="label">{{ SECCION5_TEMPLATES.labelTituloTabla }}</label>
      <input type="text" class="input" [placeholder]="SECCION5_TEMPLATES.placeholderTituloTabla.replace('{{nombreComunidad}}', obtenerNombreComunidadActual())"
        [value]="tituloInstitucionesSignal()"
        (input)="projectFacade.setField(seccionId, null, 'tituloInstituciones' + obtenerPrefijoGrupo(), $any($event.target).value)">
    </div>

    <div class="form-field" style="margin-top: 20px;">
      <label class="label">{{ SECCION5_TEMPLATES.labelTablaInstituciones }}</label>
      <app-dynamic-table
        [datos]="datos"
        [config]="institucionesConfig"
        [columns]="columnasInstituciones"
        [sectionId]="seccionId"
        [tablaKey]="tablaKeyInstitucionesSignal()"
        (tableUpdated)="onTablaActualizada()">
      </app-dynamic-table>
    </div>

    <div class="form-field" style="margin-top: 15px;">
      <label class="label">{{ SECCION5_TEMPLATES.labelFuenteTabla }}</label>
      <input type="text" class="input" [placeholder]="SECCION5_TEMPLATES.placeholderFuenteTabla"
        [value]="fuenteInstitucionesSignal()"
        (input)="projectFacade.setField(seccionId, null, 'fuenteInstituciones' + obtenerPrefijoGrupo(), $any($event.target).value)">
    </div>

    <div class="form-field" style="margin-top: 20px;">
      <label class="label">{{ SECCION5_TEMPLATES.labelFotografias }}</label>
      <app-image-upload
        [fotografias]="fotografiasFormMulti"
        [sectionId]="seccionId"
        [photoPrefix]="photoPrefixSignal()"
        [permitirMultiples]="true"
        [labelTitulo]="SECCION5_TEMPLATES.labelFotoTitulo"
        [labelFuente]="SECCION5_TEMPLATES.labelFotoFuente"
        [labelImagen]="SECCION5_TEMPLATES.labelFotoImagen"
        [placeholderTitulo]="SECCION5_TEMPLATES.placeholderProfesor.replace('{{nombreComunidad}}', obtenerNombreComunidadActual())"
        [placeholderFuente]="SECCION5_TEMPLATES.placeholderFotoFuente"
        [tituloDefault]="SECCION5_TEMPLATES.fotoTituloDefault.replace('{{nombreComunidad}}', obtenerNombreComunidadActual())"
        [fuenteDefault]="SECCION5_TEMPLATES.fotoFuenteDefault"
        [requerido]="false"
        (fotografiasChange)="onFotografiasChange($event)">
      </app-image-upload>
    </div>
  </div>
</div>
