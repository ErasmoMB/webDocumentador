<div class="seccion-formulario-content">
  <div class="form-group-section">
    <h4 class="section-title">{{ SECCION9_TEMPLATES.seccionViviendas }}</h4>
    
    <!-- Sección Viviendas -->
    <div class="form-group-section" style="margin-top: 20px;">
      <h5>{{ SECCION9_TEMPLATES.subtituloCondicionOcupacion }}</h5>
      
      <app-paragraph-editor
        fieldId="textoViviendas"
        [label]="SECCION9_TEMPLATES.labelTextoViviendas"
        [hint]="SECCION9_TEMPLATES.hintTextoViviendas"
        [rows]="4"
        [value]="textoViviendas.value()"
        (valueChange)="textoViviendas.update($event)">
      </app-paragraph-editor>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <label class="label">{{ SECCION9_TEMPLATES.labelTituloCondicionOcupacion }}</label>
      <input 
        type="text"
        class="form-control"
        [ngModel]="tituloCondicionOcupacion.value()"
        (ngModelChange)="tituloCondicionOcupacion.update($event)"
        [placeholder]="SECCION9_TEMPLATES.placeholderTituloCondicionOcupacion">
    </div>

    <div class="form-group-section" style="margin-top: 15px;">
      <label class="label">{{ SECCION9_TEMPLATES.labelTablaCondicionOcupacion }}</label>
      <app-dynamic-table
        [datos]="datos"
        [config]="condicionOcupacionConfig"
        [columns]="[
          { field: 'categoria', label: SECCION9_TEMPLATES.columnasCondicionOcupacion.categoria, type: 'text', placeholder: SECCION9_TEMPLATES.placeholderCategoria, readonly: true },
          { field: 'casos', label: SECCION9_TEMPLATES.columnasCondicionOcupacion.casos, type: 'number', placeholder: '0', readonly: false },
          { field: 'porcentaje', label: SECCION9_TEMPLATES.columnasCondicionOcupacion.porcentaje, type: 'text', placeholder: '0%', readonly: true }
        ]"
        [sectionId]="seccionId"
        [tablaKey]="getTablaKeyCondicionOcupacion()"
        [showAddButton]="false"
        [showDeleteButton]="false"
        (tableUpdated)="onCondicionOcupacionTableUpdated($event)">
      </app-dynamic-table>
    </div>

    <div class="form-group-section" style="margin-top: 15px;">
      <label class="label">{{ SECCION9_TEMPLATES.labelFuente }}</label>
      <input 
        type="text"
        class="form-control"
        [ngModel]="fuenteCondicionOcupacion.value()"
        (ngModelChange)="fuenteCondicionOcupacion.update($event)"
        [placeholder]="SECCION9_TEMPLATES.placeholderFuenteCondicionOcupacion">
    </div>

    <!-- Sección Estructura -->
    <div class="form-group-section" style="margin-top: 30px;">
      <h5>{{ SECCION9_TEMPLATES.seccionEstructura }}</h5>
      
      <app-paragraph-editor
        fieldId="textoEstructura"
        [label]="SECCION9_TEMPLATES.labelTextoEstructura"
        [hint]="SECCION9_TEMPLATES.hintTextoEstructura"
        [rows]="4"
        [value]="textoEstructura.value()"
        (valueChange)="textoEstructura.update($event)">
      </app-paragraph-editor>
    </div>

    <div class="form-group-section" style="margin-top: 30px;">
      <label class="label">{{ SECCION9_TEMPLATES.labelTituloTiposMateriales }}</label>
      <input 
        type="text"
        class="form-control"
        [ngModel]="tituloTiposMateriales.value()"
        (ngModelChange)="tituloTiposMateriales.update($event)"
        [placeholder]="SECCION9_TEMPLATES.placeholderTituloTiposMateriales">
    </div>

    <div class="form-group-section" style="margin-top: 15px;">
      <label class="label">{{ SECCION9_TEMPLATES.labelTablaTiposMateriales }}</label>
      <app-dynamic-table
        [datos]="datos"
        [config]="tiposMaterialesConfig"
        [columns]="[
          { field: 'categoria', label: SECCION9_TEMPLATES.columnasTiposMateriales.categoria, type: 'text', placeholder: SECCION9_TEMPLATES.placeholderCategorias, readonly: false },
          { field: 'tipoMaterial', label: SECCION9_TEMPLATES.columnasTiposMateriales.tipoMaterial, type: 'text', placeholder: SECCION9_TEMPLATES.placeholderTipoMaterial, readonly: false },
          { field: 'casos', label: SECCION9_TEMPLATES.columnasTiposMateriales.casos, type: 'number', placeholder: '0', readonly: false },
          { field: 'porcentaje', label: SECCION9_TEMPLATES.columnasTiposMateriales.porcentaje, type: 'text', placeholder: '0%', readonly: true }
        ]"
        [sectionId]="seccionId"
        [tablaKey]="getTablaKeyTiposMateriales()"
        [showAddButton]="true"
        [showDeleteButton]="true"
        (tableUpdated)="onTiposMaterialesTableUpdated($event)">
      </app-dynamic-table>
    </div>

    <div class="form-group-section" style="margin-top: 15px;">
      <label class="label">{{ SECCION9_TEMPLATES.labelFuente }}</label>
      <input 
        type="text"
        class="form-control"
        [ngModel]="fuenteTiposMateriales.value()"
        (ngModelChange)="fuenteTiposMateriales.update($event)"
        [placeholder]="SECCION9_TEMPLATES.placeholderFuenteTiposMateriales">
    </div>

    <!-- Sección Fotografías -->
    <div class="form-group-section" style="margin-top: 30px;">
      <h5>{{ SECCION9_TEMPLATES.seccionFotografias }}</h5>
      <app-image-upload
        [modoVista]="false"
        [permitirMultiples]="true"
        [fotografias]="fotografiasSeccion9"
        [sectionId]="seccionId"
        [photoPrefix]="PHOTO_PREFIX + obtenerPrefijo()"
        [labelTitulo]="SECCION9_TEMPLATES.labelFotoTitulo"
        [labelFuente]="SECCION9_TEMPLATES.labelFotoFuente"
        [labelImagen]="SECCION9_TEMPLATES.labelFotoImagen"
        (fotografiasChange)="onFotografiasChange($event)">
      </app-image-upload>
    </div>
  </div>
</div>
